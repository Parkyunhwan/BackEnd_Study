# 관계형 데이터베이스

# 데이터베이스 제어 기법

# 프로세스 vs 스레드

![자바스레드](https://user-images.githubusercontent.com/47052106/113518897-14cc6400-95c4-11eb-8917-cfb45ad55306.png)

- 스레드는 스택영역을 스레드의 개수만큼 분할하는 것이다. 또한 각각의 스레드는 다시 스태틱영역, 스택영역, 힙영역을 가지게 된다.
- 스택영역이 분할되므로 스레드 간의 스택영역을 침범 할 수는 없지만 큰 측면에서 봤을 때 결국 자바 메모리의 스태틱영역과 힙영역은 공유 할 수 있다!

## 멀티프로세스 vs 멀티스레드

- 멀티 프로세스(Multi Process)
    - 하나의 프로세스가 다른 프로세스의 T메모리 영역을 절대 침범 할 수 없는 메모리로써 안전한 구조이지만, 그만큼 메모리 사용량을 크다!
- 멀티 스레드(Multi Thread)
    - 스택영역이 분할되어 하나의 스레드에서 다른 스레드로 접근 할 수는 없지만 스태틱 영역과 힙 영역은 공유해서 사용 할 수 있다. 따라서 멀티 프로세스 대비 메모리를 적게 사용 할 수 있는 구조이다.

## 서버 프로그래밍에서 Servlet은 요청 당 스레드를 생성

- Servlet 과 CGI??
    - 요청 당 스레드를 생성 => Servlet
    - 요청 당 프로세스 생성 => CGI
- [CGI](https://jinbroing.tistory.com/205)
- [Servlet](https://mangkyu.tistory.com/14)
- [웹서버와 WAS](https://www.youtube.com/watch?v=NyhbNtOq0Bc)

- 스레드가 Critical Section을 접근하는 것에 대한 문제를 해결해야 한다.

# 쿠키와 세션
- 쿠키
    - 사이트를 방문하고 이용할 때 브라우저에 저장되는 내용. 브라우저는 내 컴퓨터에 있는 거니까 내가 갖고 있는 정보다.
    - 내가 임의로 고치거나 지울 수 있고, 남이 훔쳐보거나 가져갈 수 있다.
    - 로그인창의 아이디를 자동완성하거나, 공지 메시지를 하루 안보기 하거나 쇼핑몰 사이트에서 로그인 안 한 상태로 물건을 장바구니의 담는 등 사용자의 편의를 위하되, 지워지거나 조작되거나 가로채이더라도 큰 일은 없을 수준의 정보들을 브라우저에 저장하는데 사용
- 세션
    - 세션을 사용하는 사이트에 접속하면 서버에서는 사용자를 구분하기 위한 기한이 짧은 임시 키 하나를 브라우저에 보내서 쿠키로 저장
    - 사용자의 중요 정보들은 서버의 메모리나 데이터베이스에 저장
    - 브라우저가 이 사이트의 페이지들에 접속할 때 마다 http 요청에 이 키가 담긴 쿠키를 실어서 전송하고, 서버는 그 키를 보고 인증된 사용자임을 인식해서 사용자의 정보들을 가공해서 응답으로 보내줌
    - 네이버에 한번 로그인한 다음 네이버의 다른 페이지들을 이용할 때마다 새로 로그인할 필요가 없는 것이, 쿠키와 세션의 조합으로 우리가 네이버에 로그인해있다는 걸 네이버 서버가 인지하고 있기 때문이다. 만약, 쿠키의 정보를 모두 지우면 로그아웃된다. 서버에서는 세션에 나의 로그인 정보를 갖고 있지만 그게 내꺼라는 걸 증명할 세션 아이디가 내 쿠키 보관함에서 지워졌기 때문이다.
    - 서비스 제공자가 직접 관리해야하고, 노출되어서는 안 될 정보들은 세션으로 서버 안에서 다뤄짐
    - 세션을 남발하면 접속자가 많을 때 서버에 부하가 걸림
- 캐시
    - 가져오는 데 비용이 드는 데이터를 한 번 가져온 뒤에는 임시로 저장
    - 웹 캐시는, 이미지 등의 정보를 불러올 때 데이터 사용량도 발생하고 시간도 들기 때문에 사용자가 여러 번 방문할 법한 사이트에서는 한 번 받아온 데이터를 사용자의 컴퓨터 또는 중간 역할을 하는 서버에 저장해둠.
